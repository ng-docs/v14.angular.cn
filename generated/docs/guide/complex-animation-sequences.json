{
  "id": "guide/complex-animation-sequences",
  "title": "Complex animation sequences",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/complex-animation-sequences.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"complex-animation-sequences\" translation-result=\"on\">复杂动画序列<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#complex-animation-sequences\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"complex-animation-sequences\">Complex animation sequences<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#complex-animation-sequences\"><i class=\"material-icons\">link</i></a></h1>\n\n<h2 id=\"prerequisites\" translation-result=\"on\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">对下列概念有基本的理解：</p><p translation-origin=\"off\">A basic understanding of the following concepts:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/animations\">Angular 动画简介</a></p><p translation-origin=\"off\"><a href=\"guide/animations\">Introduction to Angular animations</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/transition-and-triggers\">转场与触发器</a></p><p translation-origin=\"off\"><a href=\"guide/transition-and-triggers\">Transition and triggers</a></p>\n\n</li>\n</ul>\n<p translation-result=\"on\">到目前为止，我们已经学过了单个 HTML 元素的简单动画。Angular 还允许你在进入和离开页面时播放 \"动画协调序列\"，比如当整个网格或元素列表进入或离开页面时，多个条目的动画之间需要彼此协调时间。你可以选择并行执行多个动画，或者按顺序逐个运行离散动画。</p><p translation-origin=\"off\">So far, we've learned simple animations of single HTML elements.\nAngular also lets you animate coordinated sequences, such as an entire grid or list of elements as they enter and leave a page.\nYou can choose to run multiple animations in parallel, or run discrete animations sequentially, one following another.</p>\n\n<p translation-result=\"on\">用来控制复杂动画序列的函数如下：</p><p translation-origin=\"off\">The functions that control complex animation sequences are:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><p translation-result=\"on\">函数</p><p translation-origin=\"off\">Functions</p></th>\n<th align=\"left\"><p translation-result=\"on\">详情</p><p translation-origin=\"off\">Details</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code></td>\n<td align=\"left\"><p translation-result=\"on\">用于查找一个或多个内部 HTML 元素。</p><p translation-origin=\"off\">Finds one or more inner HTML elements.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code></td>\n<td align=\"left\"><p translation-result=\"on\">用于为多元素动画应用级联延迟。</p><p translation-origin=\"off\">Applies a cascading delay to animations for multiple elements.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><a href=\"api/animations/group\"><code>group()</code></a></td>\n<td align=\"left\"><p translation-result=\"on\">用于并行执行多个动画步骤。</p><p translation-origin=\"off\">Runs multiple animation steps in parallel.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code></td>\n<td align=\"left\"><p translation-result=\"on\">用于逐个顺序执行多个动画步骤。</p><p translation-origin=\"off\">Runs animation steps one after another.</p></td>\n</tr>\n\n</tbody>\n</table>\n<p><a id=\"complex-sequence\"></a></p>\n<h2 id=\"the-query-function\" translation-result=\"on\">query() 函数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#the-query-function\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"the-query-function\">The query() function<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#the-query-function\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">大多数复杂动画都依赖 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 函数来查找子元素并对其应用动画，基本的例子是：</p><p translation-origin=\"off\">Most complex animations rely on the <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> function to find child elements and apply animations to them, basic examples of such are:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><p translation-result=\"on\">例子</p><p translation-origin=\"off\">Examples</p></th>\n<th align=\"left\"><p translation-result=\"on\">详情</p><p translation-origin=\"off\">Details</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 后跟 <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code></p><p translation-origin=\"off\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> followed by <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code></p></td>\n<td align=\"left\"><p translation-result=\"on\">用于查询简单的 HTML 元素并直接对它们应用动画。</p><p translation-origin=\"off\">Used to query simple HTML elements and directly apply animations to them.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><p translation-result=\"on\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 后跟 <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code></p><p translation-origin=\"off\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> followed by <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code></p></td>\n<td align=\"left\"><p translation-result=\"on\">用于查询子元素，这些元素本身就应用了动画元数据并触发这样的动画（否则将被当前/父元素的动画阻止）。</p><p translation-origin=\"off\">Used to query child elements, which themselves have animations metadata applied to them and trigger such animation (which would be otherwise be blocked by the current/parent element's animation).</p></td>\n</tr>\n\n</tbody>\n</table>\n<p translation-result=\"on\"><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 的第一个参数是一个 <a href=\"https://developer.mozilla.org/docs/Web/CSS/CSS_Selectors\">css 选择器</a>字符串，它还可以包含以下 Angular 特定的标记：</p><p translation-origin=\"off\">The first argument of <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> is a <a href=\"https://developer.mozilla.org/docs/Web/CSS/CSS_Selectors\">css selector</a> string which can also contain the following Angular-specific tokens:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><p translation-result=\"on\">标记</p><p translation-origin=\"off\">Tokens</p></th>\n<th align=\"left\"><p translation-result=\"on\">详情</p><p translation-origin=\"off\">Details</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><p><code>:enter</code> <br> <code>:leave</code></p><p><code>:enter</code><br><code>:leave</code></p></td>\n<td align=\"left\"><p translation-result=\"on\">用于进入/离开元素。</p><p translation-origin=\"off\">For entering/leaving elements.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>:animating</code></td>\n<td align=\"left\"><p translation-result=\"on\">对于当前正在播放动画的元素。</p><p translation-origin=\"off\">For elements currently animating.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>@*</code> <br> <code>@triggerName</code></td>\n<td align=\"left\"><p translation-result=\"on\">对于具有任何（或特定）触发器的元素。</p><p translation-origin=\"off\">For elements with any—or a specific—trigger.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>:self</code></td>\n<td align=\"left\"><p translation-result=\"on\">动画元素本身。</p><p translation-origin=\"off\">The animating element itself.</p></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"callout is-helpful\">\n<header translation-result=\"on\">进入和离开元素</header><header translation-origin=\"off\">Entering and Leaving Elements</header>\n\n<p translation-result=\"on\">并非所有子元素都会实际上被认为是进入/离开；有时，这可能是违反直觉和令人困惑的。有关更多信息，参阅 <a href=\"api/animations/query#entering-and-leaving-elements\">query api 的文档</a>。</p><p translation-origin=\"off\">Not all child elements are actually considered as entering/leaving; this can, at times, be counterintuitive and confusing. Please see the <a href=\"api/animations/query#entering-and-leaving-elements\">query api docs</a> for more information.</p>\n\n<p translation-result=\"on\">你还可以在 Querying 选项卡下的动画实时示例（在动画<a href=\"guide/animations#about-this-guide\">介绍部分介绍</a>）中看到这方面的插图。</p><p translation-origin=\"off\">You can also see an illustration of this in the animations live example (introduced in the animations <a href=\"guide/animations#about-this-guide\">introduction section</a>) under the Querying tab.</p>\n\n</div>\n<h2 id=\"animate-multiple-elements-using-query-and-stagger-functions\" translation-result=\"on\">使用 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 和 <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code>（交错）函数执行多元素动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animate-multiple-elements-using-query-and-stagger-functions\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"animate-multiple-elements-using-query-and-stagger-functions\">Animate multiple elements using query() and stagger() functions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animate-multiple-elements-using-query-and-stagger-functions\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">通过 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 查询子元素后，<code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> 函数允许你定义每个查询的动画项之间的时间间隙，从而为元素之间延迟设置动画。</p><p translation-origin=\"off\">After having queried child elements via <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code>, the <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> function lets you define a timing gap between each queried item that is animated and thus animates elements with a delay between them.</p>\n\n<p translation-result=\"on\">下面的例子演示了如何使用 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 和 <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> 函数对依次添加的英雄列表从上到下播放动画（有少许延迟）。</p><p translation-origin=\"off\">The following example demonstrates how to use the <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> and <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> functions to animate a list (of heroes) adding each in sequence, with a slight delay, from top to bottom.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">用 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 查阅正在进入或离开页面的任意元素。该查询会找出那些符合某种匹配 CSS 选择器的元素</p><p translation-origin=\"off\">Use <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> to look for an element entering the page that meets certain criteria</p>\n\n</li>\n<li>\n<p translation-result=\"on\">对每个元素，使用 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> 为其设置初始样式。使其变得透明，并使用 <code>transform</code> 将其移出位置，以便它能滑入后就位。</p><p translation-origin=\"off\">For each of these elements, use <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> to set the same initial style for the element.\nMake it transparent and use <code>transform</code> to move it out of position so that it can slide into place.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">使用 <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> 来在每个动画之间延迟 30 毫秒</p><p translation-origin=\"off\">Use <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> to delay each animation by 30 milliseconds</p>\n\n</li>\n<li>\n<p translation-result=\"on\">对屏幕上的每个元素，根据一条自定义缓动曲线播放 0.5 秒的动画，同时将其淡入，而且逐步取消以前的位移效果</p><p translation-origin=\"off\">Animate each element on screen for 0.5 seconds using a custom-defined easing curve, simultaneously fading it in and un-transforming it</p>\n\n</li>\n</ul>\n<code-example header=\"src/app/hero-list-page.component.ts\" path=\"animations/src/app/hero-list-page.component.ts\" region=\"page-animations\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('pageAnimations', [\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('.hero', [\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({opacity: 0, transform: 'translateY(-100px)'}),\n        <a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>(30, [\n          <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('500ms cubic-bezier(0.35, 0, 0.25, 1)',\n          <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1, transform: 'none' }))\n        ])\n      ])\n    ])\n  ]),\n\n</code-example>\n<h2 id=\"parallel-animation-using-group-function\" translation-result=\"on\">使用 <code>group()</code> 函数播放并行动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#parallel-animation-using-group-function\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"parallel-animation-using-group-function\">Parallel animation using group() function<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#parallel-animation-using-group-function\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你已经了解了如何在两个连续的动画之间添加延迟。不过你可能还想配置一些并行的动画。比如，你可能希望为同一个元素的两个 CSS 属性设置动画，但要为每个属性使用不同的 <code>easing</code> 函数。这时，你可以使用动画函数 <a href=\"api/animations/group\"><code>group()</code></a>。</p><p translation-origin=\"off\">You've seen how to add a delay between each successive animation.\nBut you might also want to configure animations that happen in parallel.\nFor example, you might want to animate two CSS properties of the same element but use a different <code>easing</code> function for each one.\nFor this, you can use the animation <a href=\"api/animations/group\"><code>group()</code></a> function.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意</strong>：<br>\n<a href=\"api/animations/group\"><code>group()</code></a>函数用于对动画<em>步骤</em>进行分组，而不是针对动画元素。</p><p translation-origin=\"off\"><strong>NOTE</strong>: <br>\nThe <a href=\"api/animations/group\"><code>group()</code></a> function is used to group animation <em>steps</em>, rather than animated elements.</p>\n\n</div>\n<p translation-result=\"on\">在下面的例子中，对 <code>:enter</code> 和 <code>:leave</code> 使用分组，可以配置两种不同的时序。它们会同时作用于同一个元素，但彼此独立运行。</p><p translation-origin=\"off\">The following example uses <a href=\"api/animations/group\"><code>group()</code></a>s on both <code>:enter</code> and <code>:leave</code> for two different timing configurations, thus applying two independent animations to the same element in parallel.</p>\n\n<code-example header=\"src/app/hero-list-groups.component.ts (excerpt)\" path=\"animations/src/app/hero-list-groups.component.ts\" region=\"animationdef\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('flyInOut', [\n    state('in', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      width: '*',\n      transform: 'translateX(0)', opacity: 1\n    })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ width: 10, transform: 'translateX(50px)', opacity: 0 }),\n      group([\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.3s 0.1s ease', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          transform: 'translateX(0)',\n          width: '*'\n        })),\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.3s ease', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          opacity: 1\n        }))\n      ])\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':leave', [\n      group([\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.3s ease', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          transform: 'translateX(50px)',\n          width: 10\n        })),\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.3s 0.2s ease', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          opacity: 0\n        }))\n      ])\n    ])\n  ])\n]\n\n</code-example>\n<h2 id=\"sequential-vs-parallel-animations\" translation-result=\"on\">顺序动画与平行动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#sequential-vs-parallel-animations\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"sequential-vs-parallel-animations\">Sequential vs. parallel animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#sequential-vs-parallel-animations\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">复杂动画中可以同时发生很多事情。但是当你要创建一个需要让几个子动画逐个执行的动画时，该怎么办呢？以前我们使用 <a href=\"api/animations/group\"><code>group()</code></a> 来同时并行运行多个动画。</p><p translation-origin=\"off\">Complex animations can have many things happening at once.\nBut what if you want to create an animation involving several animations happening one after the other? Earlier you used <a href=\"api/animations/group\"><code>group()</code></a> to run multiple animations all at the same time, in parallel.</p>\n\n<p translation-result=\"on\">第二个名叫 <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code> 的函数会让你一个接一个地运行这些动画。在 <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code> 中，这些动画步骤由 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> 或 <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> 的函数调用组成。</p><p translation-origin=\"off\">A second function called <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code> lets you run those same animations one after the other.\nWithin <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code>, the animation steps consist of either <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> or <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> function calls.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> 用来立即应用所指定的样式数据。</p><p translation-origin=\"off\">Use <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> to apply the provided styling data immediately.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> 用来在一定的时间间隔内应用样式数据。</p><p translation-origin=\"off\">Use <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> to apply styling data over a given time interval.</p>\n\n</li>\n</ul>\n<h2 id=\"filter-animation-example\" translation-result=\"on\">过滤器动画范例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#filter-animation-example\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"filter-animation-example\">Filter animation example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#filter-animation-example\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">来看看范例应用中的另一个动画。在 Filter/Stagger 页，往 <strong>Search Heroes</strong> 文本框中输入一些文本，比如 <code>Magnet</code> 或 <code>tornado</code>。</p><p translation-origin=\"off\">Take a look at another animation on the live example page.\nUnder the Filter/Stagger tab, enter some text into the <strong>Search Heroes</strong> text box, such as <code>Magnet</code> or <code>tornado</code>.</p>\n\n<p translation-result=\"on\">过滤器会在你输入时实时工作。每当你键入一个新字母时，就会有一些元素离开页面，并且过滤条件也会逐渐变得更加严格。相反，当你删除过滤器中的每个字母时，英雄列表也会逐渐重新进入页面中。</p><p translation-origin=\"off\">The filter works in real time as you type.\nElements leave the page as you type each new letter and the filter gets progressively stricter.\nThe heroes list gradually re-enters the page as you delete each letter in the filter box.</p>\n\n<p translation-result=\"on\">HTML 模板中包含一个名叫 <code>filterAnimation</code> 的触发器。</p><p translation-origin=\"off\">The HTML template contains a trigger called <code>filterAnimation</code>.</p>\n\n<code-example header=\"src/app/hero-list-page.component.html\" path=\"animations/src/app/hero-list-page.component.html\" region=\"filter-animations\">\n&#x3C;label for=\"search\">Search heroes: &#x3C;/label>\n&#x3C;input type=\"text\" id=\"search\" #criteria\n       (input)=\"updateCriteria(criteria.value)\"\n       placeholder=\"Search heroes\">\n\n&#x3C;ul class=\"heroes\" [@filterAnimation]=\"heroesTotal\">\n  &#x3C;li *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes\" class=\"hero\">\n    &#x3C;div class=\"inner\">\n      &#x3C;span class=\"badge\">{{ hero.id }}&#x3C;/span>\n      &#x3C;span class=\"name\">{{ hero.name }}&#x3C;/span>\n    &#x3C;/div>\n  &#x3C;/li>\n&#x3C;/ul>\n\n</code-example>\n<p translation-result=\"on\">该组件装饰器中的 <code>filterAnimation</code> 包含三个转场。</p><p translation-origin=\"off\">The <code>filterAnimation</code> in the component's decorator contains three transitions.</p>\n\n<code-example header=\"src/app/hero-list-page.component.ts\" path=\"animations/src/app/hero-list-page.component.ts\" region=\"filter-animations\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  animations: [\n    <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('filterAnimation', [\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter, * => 0, * => -1', []),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment', [\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n          <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0, width: 0 }),\n          <a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>(50, [\n            <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1, width: '*' })),\n          ]),\n        ], { optional: true })\n      ]),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':decrement', [\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n          <a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>(50, [\n            <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0, width: 0 })),\n          ]),\n        ])\n      ]),\n    ]),\n  ]\n})\nexport class HeroListPageComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroesTotal = -1;\n\n  get heroes() { return this._heroes; }\n  private _heroes: Hero[] = [];\n\n  ngOnInit() {\n    this._heroes = HEROES;\n  }\n\n  updateCriteria(criteria: string) {\n    criteria = criteria ? criteria.trim() : '';\n\n    this._heroes = HEROES.filter(hero => hero.name.toLowerCase().includes(criteria.toLowerCase()));\n    const newTotal = this.heroes.length;\n\n    if (this.heroesTotal !== newTotal) {\n      this.heroesTotal = newTotal;\n    } else if (!criteria) {\n      this.heroesTotal = -1;\n    }\n  }\n}\n\n</code-example>\n<p translation-result=\"on\">这个例子中的代码包含下列任务：</p><p translation-origin=\"off\">The code in this example performs the following tasks:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">当用户首次打开或导航到此页面时，跳过所有动画（该动画会压扁已经存在的内容，因此它只会作用于那些已经存在于 DOM 中的元素）</p><p translation-origin=\"off\">Skips animations when the user first opens or navigates to this page (the filter animation narrows what is already there, so it only works on elements that already exist in the DOM)</p>\n\n</li>\n<li>\n<p translation-result=\"on\">根据搜索框中的值过滤英雄</p><p translation-origin=\"off\">Filters heroes based on the search input's value</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">对于每次匹配：</p><p translation-origin=\"off\">For each change:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">通过将元素的不透明度和宽度设置为 0 来隐藏正在离开 DOM 的元素</p><p translation-origin=\"off\">Hides an element leaving the DOM by setting its opacity and width to 0</p>\n\n</li>\n<li>\n<p translation-result=\"on\">对正在进入 DOM 的元素，播放一个 300 毫秒的动画。在动画期间，该元素采用其默认宽度和不透明度。</p><p translation-origin=\"off\">Animates an element entering the DOM over 300 milliseconds.\nDuring the animation, the element assumes its default width and opacity.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果有多个匹配的元素正在进入或离开 DOM，则从页面顶部的元素开始对每个元素进行交错（stagger），每个元素之间的延迟为 50 毫秒</p><p translation-origin=\"off\">If there are multiple elements entering or leaving the DOM, staggers each animation starting at the top of the page, with a 50-millisecond delay between each element</p>\n\n</li>\n</ul>\n<h2 id=\"animating-the-items-of-a-reordering-list\" translation-result=\"on\">在重新排序列表的条目时设置动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animating-the-items-of-a-reordering-list\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"animating-the-items-of-a-reordering-list\">Animating the items of a reordering list<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animating-the-items-of-a-reordering-list\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">尽管 Angular 开箱即用的支持 <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> 列表项动画，但如果只是它们的顺序变化了，就无法支持。因为 Angular 会忘记哪个元素是哪个元素，从而导致这些动画被破坏。帮助 Angular 跟踪此类元素的唯一方法是将 <code><a href=\"api/core/TrackByFunction\" class=\"code-anchor\">TrackByFunction</a></code> 分配给 <code><a href=\"api/common/NgForOf\" class=\"code-anchor\">NgForOf</a></code> 指令。这可确保 Angular 始终知道哪个元素是哪个，从而允许它始终将正确的动画应用于正确的元素。</p><p translation-origin=\"off\">Although Angular animates correctly <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> list items out of the box, it will not be able to do so if their ordering changes.\nThis is because it will lose track of which element is which, resulting in broken animations.\nThe only way to help Angular keep track of such elements is by assigning a <code><a href=\"api/core/TrackByFunction\" class=\"code-anchor\">TrackByFunction</a></code> to the <code><a href=\"api/common/NgForOf\" class=\"code-anchor\">NgForOf</a></code> directive.\nThis makes sure that Angular always knows which element is which, thus allowing it to apply the correct animations to the correct elements all the time.</p>\n\n<div class=\"alert is-important\">\n<p translation-result=\"on\"><strong>重要</strong>：<br>\n如果你需要为 <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> 列表的条目设置动画，并且此类条目的顺序有可能在运行时更改，请始终使用 <code><a href=\"api/core/TrackByFunction\" class=\"code-anchor\">TrackByFunction</a></code>。</p><p translation-origin=\"off\"><strong>IMPORTANT</strong>: <br>\nIf you need to animate the items of an <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> list and there is a possibility that the order of such items will change during runtime, always use a <code><a href=\"api/core/TrackByFunction\" class=\"code-anchor\">TrackByFunction</a></code>.</p>\n\n</div>\n<h2 id=\"animation-sequence-summary\" translation-result=\"on\">动画序列总结<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animation-sequence-summary\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"animation-sequence-summary\">Animation sequence summary<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#animation-sequence-summary\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 中这些用于多元素动画的函数，都要从 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 开始，查找出内部元素，比如找出某个 <code>&#x3C;div></code> 中的所有图片。其余函数 <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code>、<a href=\"api/animations/group\"><code>group()</code></a> 和 <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code> 会以级联方式或你的自定义逻辑来控制要如何应用多个动画步骤。</p><p translation-origin=\"off\">Angular functions for animating multiple elements start with <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> to find inner elements; for example, gathering all images within a <code>&#x3C;div></code>.\nThe remaining functions, <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code>, <a href=\"api/animations/group\"><code>group()</code></a>, and <code><a href=\"api/animations/sequence\" class=\"code-anchor\">sequence</a>()</code>, apply cascades or let you control how multiple animation steps are applied.</p>\n\n<h2 id=\"more-on-angular-animations\" translation-result=\"on\">关于 Angular 动画的更多知识<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#more-on-angular-animations\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"more-on-angular-animations\">More on Angular animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/complex-animation-sequences#more-on-angular-animations\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你可能还对下列内容感兴趣：</p><p translation-origin=\"off\">You might also be interested in the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/animations\">Angular 动画简介</a></p><p translation-origin=\"off\"><a href=\"guide/animations\">Introduction to Angular animations</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/transition-and-triggers\">转场与触发器</a></p><p translation-origin=\"off\"><a href=\"guide/transition-and-triggers\">Transition and triggers</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/reusable-animations\">可复用动画</a></p><p translation-origin=\"off\"><a href=\"guide/reusable-animations\">Reusable animations</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/route-animations\">路由转场动画</a></p><p translation-origin=\"off\"><a href=\"guide/route-animations\">Route transition animations</a></p>\n\n</li>\n</ul>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/animations\n - guide/reusable-animations\n - guide/route-animations\n - guide/transition-and-triggers\n-->\n<!-- links from this doc:\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/group\n - api/animations/query\n - api/animations/query#entering-and-leaving-elements\n - api/animations/sequence\n - api/animations/stagger\n - api/animations/style\n - api/animations/transition\n - api/animations/trigger\n - api/common/NgForOf\n - api/core/Component\n - api/core/OnInit\n - api/core/TrackByFunction\n - guide/animations\n - guide/animations#about-this-guide\n - guide/complex-animation-sequences#animate-multiple-elements-using-query-and-stagger-functions\n - guide/complex-animation-sequences#animating-the-items-of-a-reordering-list\n - guide/complex-animation-sequences#animation-sequence-summary\n - guide/complex-animation-sequences#complex-animation-sequences\n - guide/complex-animation-sequences#filter-animation-example\n - guide/complex-animation-sequences#more-on-angular-animations\n - guide/complex-animation-sequences#parallel-animation-using-group-function\n - guide/complex-animation-sequences#prerequisites\n - guide/complex-animation-sequences#sequential-vs-parallel-animations\n - guide/complex-animation-sequences#the-query-function\n - guide/reusable-animations\n - guide/route-animations\n - guide/transition-and-triggers\n - https://developer.mozilla.org/docs/Web/CSS/CSS_Selectors\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/complex-animation-sequences.md?message=docs%3A%20请简述你的修改...\n-->"
}