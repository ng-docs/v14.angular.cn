{
  "id": "guide/service-worker-notifications",
  "title": "Service worker notifications",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/service-worker-notifications.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"service-worker-notifications\" translation-result=\"on\">Service Worker 通知<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#service-worker-notifications\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"service-worker-notifications\">Service worker notifications<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#service-worker-notifications\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">推送通知是吸引用户的一种引人注目的方式。通过 Service Worker 的强大功能，即使你的应用程序不在焦点上，也可以将通知发送到设备。</p><p translation-origin=\"off\">Push notifications are a compelling way to engage users.\nThrough the power of service workers, notifications can be delivered to a device even when your application is not in focus.</p>\n\n<p translation-result=\"on\">Angular Service Worker 支持显示推送通知和处理通知点击事件。</p><p translation-origin=\"off\">The Angular service worker enables the display of push notifications and the handling of notification click events.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">使用 Angular Service Worker 时，推送通知交互是使用 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 服务处理的。要了解有关所涉及的浏览器 API 的更多信息，请参阅<a href=\"https://developer.mozilla.org/docs/Web/API/Push_API\">推送 API</a>和<a href=\"https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\">使用通知 API</a>。</p><p translation-origin=\"off\">When using the Angular service worker, push notification interactions are handled using the <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> service.\nTo learn more about the browser APIs involved see <a href=\"https://developer.mozilla.org/docs/Web/API/Push_API\">Push API</a> and <a href=\"https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\">Using the Notifications API</a>.</p>\n\n</div>\n<h2 id=\"prerequisites\" translation-result=\"on\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">我们建议你对以下内容有基本的了解：</p><p translation-origin=\"off\">We recommend you have a basic understanding of the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-getting-started\">Service Worker 快速上手</a>。</p><p translation-origin=\"off\"><a href=\"guide/service-worker-getting-started\">Getting Started with Service Workers</a></p>\n\n</li>\n</ul>\n<h2 id=\"notification-payload\" translation-result=\"on\">通知负载<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-payload\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"notification-payload\">Notification payload<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-payload\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">通过推送具有有效负载的消息来调用推送通知。请参阅 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 以获得指导。</p><p translation-origin=\"off\">Invoke push notifications by pushing a message with a valid payload.\nSee <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> for guidance.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">在 Chrome 中，你可以在没有后端的情况下测试推送通知。打开 Devtools -> Application -> Service Workers 并使用 <code>Push</code> 输入发送 JSON 通知负载。</p><p translation-origin=\"off\">In Chrome, you can test push notifications without a backend.\nOpen Devtools -> Application -> Service Workers and use the <code>Push</code> input to send a JSON notification payload.</p>\n\n</div>\n<h2 id=\"notification-click-handling\" translation-result=\"on\">通知点击处理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-click-handling\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"notification-click-handling\">Notification click handling<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-click-handling\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><code>notificationclick</code> 点击事件的默认行为是关闭通知并通知 <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>。</p><p translation-origin=\"off\">The default behavior for the <code>notificationclick</code> event is to close the notification and notify <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>.</p>\n\n<p translation-result=\"on\">你可以通过向 <code>data</code> 对象添加 <code>onActionClick</code> 属性并提供 <code>default</code> 条目来指定要在 <code>notificationclick</code> 上执行的附加操作。当单击通知时没有打开的客户端时，这尤其有用。</p><p translation-origin=\"off\">You can specify an additional operation to be executed on <code>notificationclick</code> by adding an <code>onActionClick</code> property to the <code>data</code> object, and providing a <code>default</code> entry.\nThis is especially useful for when there are no open clients when a notification is clicked.</p>\n\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\", \"url\": \"foo\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<h3 id=\"operations\" translation-result=\"on\">操作<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#operations\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"operations\">Operations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#operations\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Angular Service Worker 支持以下操作：</p><p translation-origin=\"off\">The Angular service worker supports the following operations:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><p translation-result=\"on\">操作</p><p translation-origin=\"off\">Operations</p></th>\n<th align=\"left\"><p translation-result=\"on\">详情</p><p translation-origin=\"off\">Details</p></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><code>openWindow</code></td>\n<td align=\"left\"><p translation-result=\"on\">在指定的 URL 处打开一个新选项卡，该选项卡相对于 Service Worker 范围进行解析。</p><p translation-origin=\"off\">Opens a new tab at the specified URL, which is resolved relative to the service worker scope.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>focusLastFocusedOrOpen</code></td>\n<td align=\"left\"><p translation-result=\"on\">聚焦最后一个有焦点的客户端。如果没有客户端打开，则它会在指定的 URL 处打开一个新选项卡，该选项卡是相对于 Service Worker 范围解析的。</p><p translation-origin=\"off\">Focuses the last focused client. If there is no client open, then it opens a new tab at the specified URL, which is resolved relative to the service worker scope.</p></td>\n</tr>\n\n<tr>\n<td align=\"left\"><code>navigateLastFocusedOrOpen</code></td>\n<td align=\"left\"><p translation-result=\"on\">聚焦最后一个有焦点的客户端并将其导航到指定的 URL，该 URL 相对于 Service Worker 范围进行解析。如果没有打开的客户端，则它会在指定的 URL 处打开一个新选项卡。</p><p translation-origin=\"off\">Focuses the last focused client and navigates it to the specified URL, which is resolved relative to the service worker scope. If there is no client open, then it opens a new tab at the specified URL.</p></td>\n</tr>\n\n</tbody>\n</table>\n<div class=\"alert is-important\">\n<p translation-result=\"on\">如果 <code>onActionClick</code> 项未定义 <code>url</code>，则使用 Service Worker 的注册范围。</p><p translation-origin=\"off\">If an <code>onActionClick</code> item does not define a <code>url</code>, then the service worker's registration scope is used.</p>\n\n</div>\n<h3 id=\"actions\" translation-result=\"on\">行动<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#actions\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"actions\">Actions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#actions\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">操作提供了一种自定义用户如何与通知交互的方法。</p><p translation-origin=\"off\">Actions offer a way to customize how the user can interact with a notification.</p>\n\n<p translation-result=\"on\">使用 <code>actions</code> 属性，你可以定义一组可用的操作。每个动作都表示为一个动作按钮，用户可以单击该按钮与通知进行交互。</p><p translation-origin=\"off\">Using the <code>actions</code> property, you can define a set of available actions.\nEach action is represented as an action button that the user can click to interact with the notification.</p>\n\n<p translation-result=\"on\">此外，使用 <code>data</code> 对象上的 <code>onActionClick</code> 属性，你可以将每个操作与单击相应操作按钮时要执行的操作联系起来：</p><p translation-origin=\"off\">In addition, using the <code>onActionClick</code> property on the <code>data</code> object, you can tie each action to an operation to be performed when the corresponding action button is clicked:</p>\n\n<code-example format=\"typescript\" language=\"typescript\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"actions\": [\n      {\"action\": \"foo\", \"title\": \"Open new tab\"},\n      {\"action\": \"bar\", \"title\": \"Focus last\"},\n      {\"action\": \"baz\", \"title\": \"Navigate last\"},\n      {\"action\": \"qux\", \"title\": \"Just notify existing clients\"}\n    ],\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\"},\n        \"foo\": {\"operation\": \"openWindow\", \"url\": \"/absolute/path\"},\n        \"bar\": {\"operation\": \"focusLastFocusedOrOpen\", \"url\": \"relative/path\"},\n        \"baz\": {\"operation\": \"navigateLastFocusedOrOpen\", \"url\": \"https://other.domain.com/\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<div class=\"alert is-important\">\n<p translation-result=\"on\">如果操作没有相应的 <code>onActionClick</code> 条目，则通知将关闭并在现有客户端上通知 <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>。</p><p translation-origin=\"off\">If an action does not have a corresponding <code>onActionClick</code> entry, then the notification is closed and <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code> is notified on existing clients.</p>\n\n</div>\n<h2 id=\"more-on-angular-service-workers\" translation-result=\"on\">关于 Angular Service Worker 的更多信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"more-on-angular-service-workers\">More on Angular service workers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你可能还对下列内容感兴趣：</p><p translation-origin=\"off\">You might also be interested in the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/service-worker-devops\">生产环境下的 Service Worker</a>。</p><p translation-origin=\"off\"><a href=\"guide/service-worker-devops\">Service Worker in Production</a></p>\n\n</li>\n</ul>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - api/service-worker/SwPush\n - guide/service-worker-communications\n - guide/service-worker-intro\n-->\n<!-- links from this doc:\n - api/service-worker/SwPush\n - api/service-worker/SwPush#notificationClicks\n - guide/service-worker-devops\n - guide/service-worker-getting-started\n - guide/service-worker-notifications#actions\n - guide/service-worker-notifications#more-on-angular-service-workers\n - guide/service-worker-notifications#notification-click-handling\n - guide/service-worker-notifications#notification-payload\n - guide/service-worker-notifications#operations\n - guide/service-worker-notifications#prerequisites\n - guide/service-worker-notifications#service-worker-notifications\n - https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\n - https://developer.mozilla.org/docs/Web/API/Push_API\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/service-worker-notifications.md?message=docs%3A%20请简述你的修改...\n-->"
}